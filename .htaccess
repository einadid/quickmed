# QuickMed - Apache Configuration
# InfinityFree Compatible

# 1. Prevent Directory Listing (Security)
Options -Indexes

# 2. Rewrite Engine & URL Handling
<IfModule mod_rewrite.c>
    RewriteEngine On
    
    # IMPORTANT: If your site is in a folder named 'quickmed', keep this.
    # If it is in the root (public_html), change to: RewriteBase /
    RewriteBase /quickmed/

    # Custom Error Pages
    ErrorDocument 404 /quickmed/404.php
    ErrorDocument 403 /quickmed/404.php
    ErrorDocument 500 /quickmed/404.php

    # Remove .php extension (Cleaner URLs)
    # Example: /login instead of /login.php
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME}\.php -f
    RewriteRule ^(.*)$ $1.php [L]
</IfModule>

# 3. Protect Sensitive Files
<FilesMatch "^(config\.php|\.env|\.htaccess|composer\.json)$">
    Order allow,deny
    Deny from all
</FilesMatch>

# 4. Security Headers
<IfModule mod_headers.c>
    Header set X-Content-Type-Options "nosniff"
    Header set X-Frame-Options "SAMEORIGIN"
    Header set X-XSS-Protection "1; mode=block"
</IfModule>

# 5. Browser Caching (Speed Optimization)
<IfModule mod_expires.c>
    ExpiresActive On
    ExpiresByType image/jpg "access plus 1 year"
    ExpiresByType image/jpeg "access plus 1 year"
    ExpiresByType image/gif "access plus 1 year"
    ExpiresByType image/png "access plus 1 year"
    ExpiresByType text/css "access plus 1 month"
    ExpiresByType application/javascript "access plus 1 month"
</IfModule>